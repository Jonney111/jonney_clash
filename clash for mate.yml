#æ­¤é…ç½®æ­é…openclash metaå†…æ ¸ä½¿ç”¨
redir-port: 7892
tproxy-port: 7895
mixed-port: 7893 # å±€åŸŸç½‘è®¿é—®Port
bind-address: '*' #ç»‘å®šIPåœ°å€
allow-lan: true # å…è®¸å±€åŸŸç½‘è®¿é—®
mode: rule # æ¨¡å¼
log-level: warning # æ—¥å¿—ç­‰çº§
external-controller: 0.0.0.0:9090 # ç½‘é¡µç«¯å£
find-process-mode: strict   # åŒ¹é…æ‰€æœ‰è¿›ç¨‹
tcp-concurrent: true # tcp å¹¶å‘æ¨¡å¼
ipv6: false #è½¯è·¯ç”±ä¸Šä¸å»ºè®®å¼€å¯

# uiéƒ¨åˆ†
# secret: ""
# external-ui: .\ui\public

geodata-mode: true
geox-url:                           # è‡ªå®šä¹‰ geodata url, éœ€è¦æœ‰ä»£ç†çš„å‰ææ‰èƒ½ä¸‹è½½geoipå’Œgeosite
    geoip: "https://gcore.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
    geosite: "https://gcore.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
    mmdb: "https://gcore.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  
# fakeip æœ¬åœ°å­˜å‚¨ï¼Œçœç•¥DNSæŸ¥è¯¢
profile:
    store-selected: true      # å­˜å‚¨ select é€‰æ‹©è®°å½•
    store-fake-ip: false        # æŒä¹…åŒ– fake-ip

# Tun é…ç½® Windowsä½¿ç”¨
tun:
    enable: false  #PCç«¯å¼€å¯ è·¯ç”±å™¨ä¸å¼€å¯
    stack: system # gvisor / lwip
    dns-hijack:
        - 0.0.0.0:53 # éœ€è¦åŠ«æŒçš„ DNS
    auto-route: true # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥tunç½‘å¡ã€‚
    auto-detect-interface: true # è‡ªåŠ¨è¯†åˆ«å‡ºå£ç½‘å¡

dns:
    enable: true # å…³é—­å°†ä½¿ç”¨ç³»ç»Ÿ DNS
    prefer-h3: true # å¼€å¯ DoH æ”¯æŒ HTTP/3ï¼Œå°†å¹¶å‘å°è¯•
    listen: ':7874' # å¼€å¯ DNS æœåŠ¡å™¨ç›‘å¬
    #default-nameserver:
        #- 127.0.0.1 # å¦‚æœæ˜¯windowsæˆ–å®‰å“å®¢æˆ·ç«¯å¯ä½¿ç”¨systemï¼Œå¦‚æœæ˜¯è½¯è·¯ç”±å¡«å†™ä½ çš„å…‰çŒ«çš„IPåœ°å€ï¼Œæ‹¨å·çš„è·¯ç”±å™¨çš„IPåœ°å€ DNS ä¸å¿…å…³é—­å…‰çŒ«çš„ipv6åŠŸèƒ½,openclashè¿è¡Œåœ¨ä¸»è·¯ç”±ä¸Šæ—¶å¡«å†™ä»»æ„å…¬å…±DNS è®°ä½æ˜¯æ›¿æ¢ï¼Œä¸è¦ä¿ç•™system
        #- 223.5.5.5
    enhanced-mode: fake-ip
    fake-ip-range: 198.18.0.1/16
    fake-ip-filter:   #è¿™é‡Œå¯ä»¥å¡«å†™ä¸ä½¿ç”¨fakeipçš„åŸŸå
        - '*.lan'
        - '*.battlenet.com.cn'
        - '*.battlenet.com'
        - '*.blzstatic.cn'
        - '*.battle.net'
        # === Linksys Wireless Router ===
        - '*.linksys.com'
        - '*.linksyssmartwifi.com'
        # === Apple Software Update Service ===
        - 'swscan.apple.com'
        - 'mesu.apple.com'
        # === Windows 10 Connnect Detection ===
        - '*.msftconnecttest.com'
        - '*.msftncsi.com'
        # === NTP Service ===
        - 'time.*.com'
        - 'time.*.gov'
        - 'time.*.edu.cn'
        - 'time.*.apple.com'
        - 'time1.*.com'
        - 'time2.*.com'
        - 'time3.*.com'
        - 'time4.*.com'
        - 'time5.*.com'
        - 'time6.*.com'
        - 'time7.*.com'
        - 'ntp.*.com'
        - 'ntp.*.com'
        - 'ntp1.*.com'
        - 'ntp2.*.com'
        - 'ntp3.*.com'
        - 'ntp4.*.com'
        - 'ntp5.*.com'
        - 'ntp6.*.com'
        - 'ntp7.*.com'
        - '*.time.edu.cn'
        - '*.ntp.org.cn'
        - '+.pool.ntp.org'
        - 'time1.cloud.tencent.com'
        # === Music Service ===
        ## NetEase
        - '+.music.163.com'
        - '*.126.net'
        ## Baidu
        - 'musicapi.taihe.com'
        - 'music.taihe.com'
        ## Kugou
        - 'songsearch.kugou.com'
        - 'trackercdn.kugou.com'
        ## Kuwo
        - '*.kuwo.cn'
        ## JOOX
        - 'api-jooxtt.sanook.com'
        - 'api.joox.com'
        - 'joox.com'
        ## QQ
        - '*.qq.com'
        - 'report.url.cn'
        ## Xiami
        - '*.xiami.com'
        ## Migu
        - '+.music.migu.cn'
        # === Game Service ===
        ## Nintendo Switch
        - '+.srv.nintendo.net'
        ## Sony PlayStation
        - '+.playstation.net'
        - '+.playstation.com'
        - '+.stun.playstation.net'
        ## Microsoft Xbox
        - 'xbox.*.microsoft.com'
        - '+.xboxlive.com'
        # === Other ===
        ## QQ Quick Login
        - 'localhost.ptlogin2.qq.com'
        ## Golang
        - 'proxy.golang.org'
        ## STUN Server
        - 'stun.*.*'
        - 'stun.*.*.*'
        ## Bilibili CDN
        - '*.mcdn.bilivideo.cn'
        # === Other ===
        - '*.bilibili.com'
        - '*.1huizhan.com'
        - '*.3.cn'
        - '*.300hu.com'
        - '*.360buy.cn'
        - '*.360buy.com'
        - '*.360buy.com.cn'
        - '*.360buyimg.com'
        - '*.360buyinternational.com'
        - '*.360top.com'
        - '*.jd.com'
    
    nameserver:
        - 127.0.0.1:5335 # å¦‚æœæ˜¯windowsæˆ–å®‰å“å®¢æˆ·ç«¯å¯ä½¿ç”¨systemï¼Œå¦‚æœæ˜¯è½¯è·¯ç”±å¡«å†™ä½ çš„å…‰çŒ«çš„IPåœ°å€ï¼Œæ‹¨å·çš„è·¯ç”±å™¨çš„IPåœ°å€ DNS ä¸å¿…å…³é—­å…‰çŒ«çš„ipv6åŠŸèƒ½,openclashè¿è¡Œåœ¨ä¸»è·¯ç”±ä¸Šæ—¶å¡«å†™ä»»æ„å…¬å…±DNS è®°ä½æ˜¯æ›¿æ¢ï¼Œä¸è¦ä¿ç•™system
        #- 114.114.114.114 # default value
        #- 223.5.5.5
        #- https://dns.alidns.com/dns-query#h3=true # å¼ºåˆ¶ HTTP/3ï¼Œä¸ perfer-h3 æ— å…³ï¼Œå¼ºåˆ¶å¼€å¯ DoH çš„ HTTP/3 æ”¯æŒï¼Œè‹¥ä¸æ”¯æŒå°†æ— æ³•ä½¿ç”¨
        #- https://doh.pub/dns-query
    fallback:
        - 127.0.0.1:5335

#èŠ‚ç‚¹å­˜æ”¾åœ°å€
proxies:

#ä»£ç†ç»„
proxy-groups: 
#Bilibili
    - name: "ğŸ“ºBilibili"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "^ğŸ‡­ğŸ‡°(?!.*GAME).*$|TW|å°|å°æ¹¾"
      proxies:
          - DIRECT 	
      use:
          - subscribe_groups  
#Twitch
    - name: "ğŸ‘€Twitch"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "^(?!.*GAME).*(é¦™æ¸¯|HK|Hong Kong|TW|å°|å°æ¹¾).*$"
      proxies:
          - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
          - "ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹" 
      use:
          - subscribe_groups    
#åŠ¨ç”»ç–¯
    - name: "ğŸï¸åŠ¨ç”»ç–¯"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "TW|å°æ¹¾" 
      proxies:
      use:
          - subscribe_groups
#OpenAI
    - name: "ğŸ”¥OpenAI"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "^(?!.*GAME)(?!.*é¦™æ¸¯).+$"
      proxies:
          - "ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹" 
      use:
          - subscribe_groups       
#Apple
    - name: "ğŸApple"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "^(?!.*GAME).*é¦™æ¸¯|HK|Hong Kong|TW|å°|å°æ¹¾|æ–°åŠ å¡|SG|ç‹®åŸ|ç¾|ç¾å›½|USA"
      proxies:
          - DIRECT
      use:
          - subscribe_groups
#Youtube
    - name: "ğŸ¥Youtube"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "^(?!.*GAME)(é¦™æ¸¯|HK|Hong Kong|TW|å°|å°æ¹¾|ç¾|ç¾å›½|USA|JP|æ—¥æœ¬).+$"
      proxies:
          - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
      use:
          - subscribe_groups	        
#æ¸¸æˆå¹³å°
    - name: "ğŸ®æ¸¸æˆå¹³å°"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "^ğŸ‡­ğŸ‡°(?!.*GAME).*$|ç¾å›½|å°æ¹¾|é˜¿æ ¹å»·|æ–°åŠ å¡|æ—¥æœ¬"
      proxies:
          - DIRECT 	
      use:
          - subscribe_groups        
# æ¸¸æˆåŠ é€Ÿ      
    - name: "ğŸ•¹ï¸æ¸¸æˆåŠ é€Ÿ"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "GAME|æ¸¸æˆ|game|é¦™æ¸¯"
      proxies:
          - DIRECT 
      use:
          - subscribe_groups	       
# å¥ˆé£      
    - name: "ğŸ¬Netflix"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "TW|å°|å°æ¹¾|æ–°åŠ å¡|SG|ç‹®åŸ|ç¾|ç¾å›½|USA|JP|æ—¥æœ¬"
      proxies:
          - "ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹" 
      use:
          - subscribe_groups  
#é¦™æ¸¯èŠ‚ç‚¹
    - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
      type: url-test # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "^ğŸ‡­ğŸ‡°(?!.*GAME).*$"
      proxies:
      use:
          - subscribe_groups      
      url: "http://connectivitycheck.gstatic.com/generate_204"
      interval: 3600    #è‡ªåŠ¨æµ‹é€Ÿå‘¨æœŸï¼Œå•ä½ï¼šç§’	  
#ç‹®åŸèŠ‚ç‚¹
    - name: "ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹"
      type: fallback # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ
      filter: "(?i)sg|æ–°åŠ å¡"
      proxies:
      use:
          - subscribe_groups       
      url: "http://connectivitycheck.gstatic.com/generate_204"
      interval: 3600    #è‡ªåŠ¨æµ‹é€Ÿå‘¨æœŸï¼Œå•ä½ï¼šç§’      
#æœºåœºé…ç½®
    - name: "âœˆï¸æœºåœºé…ç½®"
      type: select # ä¸‹é¢å¼€å¯äº†è‡ªåŠ¨æµ‹é€Ÿ    
      proxies:
          - DIRECT 
          - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
          - "ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹"	
      use:
          - subscribe_groups 	     

#ä»£ç†é›†  å¦‚æœæ˜¯è‡ªå»ºèŠ‚ç‚¹å±è”½è¿™é‡Œ  
proxy-providers:
    #è‡ªå®šä¹‰æœºåœºåç§°subscribe_groups
    subscribe_groups:
        type: http # http çš„ path å¯ç©ºç½®,é»˜è®¤å‚¨å­˜è·¯å¾„ä¸º homedirçš„proxiesæ–‡ä»¶å¤¹,æ–‡ä»¶åä¸ºurlçš„md5
        url: "" #è®¢é˜…é“¾æ¥å­˜æ”¾åœ¨åŒå¼•å·å†…
        interval: 604800 #æœºåœºè®¢é˜…è‡ªåŠ¨æ›´æ–°æ—¶é—´ å•ä½ï¼šç§’
        path: ./paoluz.yaml # é»˜è®¤åªå…è®¸å­˜å‚¨åœ¨ clash çš„ Home Dirï¼Œå¦‚æœæƒ³å­˜å‚¨åˆ°ä»»æ„ä½ç½®ï¼Œæ·»åŠ ç¯å¢ƒå˜é‡ SKIP_SAFE_PATH_CHECK=1
        health-check:
            enable: true
            interval: 300
            url: http://connectivitycheck.gstatic.com/generate_204
        override:
            skip-cert-verify: true
            udp: true
        filter: "^((?!æ›´æ–°|å‰©ä½™|æµé‡|æç¤º).)*$"
      
#è§„åˆ™é›†
rule-providers:     
    Bilibili:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/BiliBili.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BiliBili/BiliBili_No_Resolve.yaml"  
        
    Youtube:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/YouTube.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube_No_Resolve.yaml"         
        
    Twitch:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Twitch.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Twitch/Twitch_No_Resolve.yaml" 
        
    Bahamut:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Bahamut.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Bahamut/Bahamut.yaml" 
        
    OpenAI:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/OpenAI.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI_No_Resolve.yaml" 
        
    BardAI:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/BardAI.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/BardAI/BardAI.yaml" 
        
    Steam:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Steam.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.yaml" 
    
    Blizzard:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Blizzard.yaml
        url: "https://github.com/blackmatrix7/ios_rule_script/blob/master/rule/Clash/Blizzard/Blizzard_No_Resolve.yaml" 
        
    Xbox:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Xbox.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Xbox/Xbox.yaml" 
        
    Origin:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Origin.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Origin/Origin.yaml" 
        
    Netflix:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Netflix.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix_Classical_No_Resolve.yaml" 
        
    Apple:
        type: http
        behavior: classical
        interval: 86400
        path: ./ruleset/Apple.yaml
        url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple_Classical_No_Resolve.yaml" 
        
    direct:
        type: http
        behavior: domain
        interval: 86400
        path: ./ruleset/direct.yaml
        url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
        
    lancidr:
        type: http
        behavior: ipcidr
        interval: 86400
        path: ./ruleset/lancidr.yaml
        url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt" 
        
    gfw:
        type: http
        behavior: domain
        interval: 86400   
        path: ./ruleset/gfw.yaml        
        url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt" 
        
    cncidr:
        type: http
        behavior: ipcidr
        interval: 86400
        path: ./ruleset/cncidr.yaml
        url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt" 
    
        
    

rules:
#åŸŸåè§„åˆ™
    - RULE-SET,Bilibili,ğŸ“ºBilibili
    - RULE-SET,Twitch,ğŸ‘€Twitch
    - RULE-SET,Bahamut,ğŸï¸åŠ¨ç”»ç–¯
    - RULE-SET,Youtube,ğŸ¥Youtube
    - RULE-SET,OpenAI,ğŸ”¥OpenAI
    - RULE-SET,BardAI,ğŸ”¥OpenAI 
    - RULE-SET,Steam,ğŸ®æ¸¸æˆå¹³å°
    - RULE-SET,Blizzard,ğŸ®æ¸¸æˆå¹³å°
    - RULE-SET,Xbox,ğŸ®æ¸¸æˆå¹³å°
    - RULE-SET,Origin,ğŸ®æ¸¸æˆå¹³å°
    - RULE-SET,Netflix,ğŸ¬Netflix
    - RULE-SET,Apple,ğŸApple
    - GEOSITE,microsoft@cn,DIRECT
    - GEOSITE,category-games@cn,DIRECT 
#åœ¨è¿™é‡Œæ·»åŠ è‡ªå®šä¹‰è§„åˆ™
    - DOMAIN,xn--ngstr-lra8j.com,âœˆï¸æœºåœºé…ç½®
    - DOMAIN,services.googleapis.cn,âœˆï¸æœºåœºé…ç½®
    - DOMAIN,mtalk.google.com,âœˆï¸æœºåœºé…ç½®
    - DOMAIN-SUFFIX,voidsec.com,âœˆï¸æœºåœºé…ç½®   #voidsec ç¤¼è²Œæ€§æ·»åŠ æ‰€è°“çš„dnsæ³„éœ²æ£€æµ‹ç«™
    - DOMAIN-SUFFIX,browserleaks.com,âœˆï¸æœºåœºé…ç½® #browserleaks ç¤¼è²Œæ€§æ·»åŠ æ‰€è°“çš„dnsæ³„éœ²æ£€æµ‹ç«™
    - DOMAIN-SUFFIX,ipleak.net,âœˆï¸æœºåœºé…ç½® #ipleak ç¤¼è²Œæ€§æ·»åŠ æ‰€è°“çš„dnsæ³„éœ²æ£€æµ‹ç«™
    - DOMAIN,events.data.microsoft.com,REJECT #æ‹¦æˆªå¾®è½¯éƒ¨åˆ†é¥æµ‹
    - GEOSITE,telegram,âœˆï¸æœºåœºé…ç½®
    #- GEOSITE,netflix,Netflix
    #- GEOSITE,disney,Disney
    - GEOSITE,spotify,âœˆï¸æœºåœºé…ç½®
    - GEOSITE,facebook,âœˆï¸æœºåœºé…ç½®
    - GEOSITE,twitter,âœˆï¸æœºåœºé…ç½®
    - GEOSITE,google,âœˆï¸æœºåœºé…ç½®
    - GEOSITE,category-scholar-!cn,âœˆï¸æœºåœºé…ç½®
    - GEOSITE,geolocation-!cn,âœˆï¸æœºåœºé…ç½®
    - RULE-SET,gfw,âœˆï¸æœºåœºé…ç½®
    - RULE-SET,direct,DIRECT
    - RULE-SET,lancidr,DIRECT
    - GEOSITE,cn,DIRECT  
#IPè§„åˆ™     
    - RULE-SET,cncidr,DIRECT
    - GEOIP,CN,DIRECT     
    - GEOIP,telegram,âœˆï¸æœºåœºé…ç½®,no-resolve
    - GEOIP,google,âœˆï¸æœºåœºé…ç½®,no-resolve
    - GEOIP,twitter,âœˆï¸æœºåœºé…ç½®,no-resolve
    - GEOIP,JP,âœˆï¸æœºåœºé…ç½®,no-resolve    

#æœ€ç»ˆåŒ¹é… ç™½åå•æ¨¡å¼
    - MATCH,âœˆï¸æœºåœºé…ç½®
